<%# Header/Nav %>
<header class="py-6 px-6 md:px-10 border-b border-ink/10">
  <div class="max-w-5xl mx-auto">
    <h1 class="text-xl font-medium text-ink">Greg Gentschev</h1>
    <% if @github_contributions.present? %>
      <div class="mt-3" data-controller="contributions-chart">
        <%= contributions_line_chart(@github_contributions) %>
      </div>
    <% end %>
  </div>
</header>

<%# Projects Section: Image Left (1/3), Content Right (2/3) %>
<section class="py-12 md:py-16 bg-cream">
  <div class="max-w-5xl mx-auto px-6 md:px-10">
    <div class="grid md:grid-cols-3 gap-8 items-start">
      <%# Image accent - 1/3 width %>
      <div class="hidden md:block">
        <%= image_tag "forest.jpg", class: "w-full h-64 object-cover rounded-lg", alt: "Forest path" %>
      </div>
      <%# Content - 2/3 width %>
      <div class="md:col-span-2">
        <h2 class="text-2xl font-light text-ink mb-6 tracking-wide">Projects</h2>
        <div class="space-y-4">
          <% @projects.each do |project| %>
            <div class="group">
              <% if project["url"] %>
                <%= link_to project["url"], class: "block", target: "_blank", rel: "noopener" do %>
                  <h3 class="text-lg font-medium text-forest group-hover:text-coral transition-colors">
                    <%= project["name"] %>
                    <span class="text-sm font-normal text-ink/40 ml-2"><%= "\u2197" %></span>
                  </h3>
                  <p class="text-ink/70 mt-1"><%= project["description"] %></p>
                <% end %>
              <% else %>
                <h3 class="text-lg font-medium text-ink/60">
                  <%= project["name"] %>
                  <span class="text-xs font-normal bg-amber/30 text-amber px-2 py-0.5 rounded ml-2">Coming soon</span>
                </h3>
                <p class="text-ink/50 mt-1"><%= project["description"] %></p>
              <% end %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</section>

<%# Writing Section: Content Left (2/3), Image Right (1/3) %>
<section class="py-12 md:py-16 bg-cream border-t border-ink/5">
  <div class="max-w-5xl mx-auto px-6 md:px-10">
    <div class="grid md:grid-cols-3 gap-8 items-start">
      <%# Content - 2/3 width %>
      <div class="md:col-span-2">
        <h2 class="text-2xl font-light text-ink mb-6 tracking-wide">Writing</h2>
        <% if @substack_posts.any? %>
          <div class="space-y-4">
            <% @substack_posts.each do |post| %>
              <div class="group">
                <%= link_to post[:url], class: "block", target: "_blank", rel: "noopener" do %>
                  <h3 class="text-lg font-medium text-ocean group-hover:text-coral transition-colors">
                    <%= post[:title] %>
                    <span class="text-sm font-normal text-ink/40 ml-2"><%= "\u2197" %></span>
                  </h3>
                  <p class="text-ink/50 text-sm mt-1">
                    <%= post[:published_at]&.strftime("%B %d, %Y") %>
                  </p>
                <% end %>
              </div>
            <% end %>
          </div>
          <div class="mt-6">
            <%= link_to "https://gentschev.substack.com", class: "text-ocean hover:text-coral transition-colors inline-flex items-center gap-2", target: "_blank", rel: "noopener" do %>
              View all on Substack
              <span><%= "\u2197" %></span>
            <% end %>
          </div>
        <% else %>
          <p class="text-ink/50">Recent posts from Substack will appear here.</p>
          <div class="mt-4">
            <%= link_to "https://gentschev.substack.com", class: "text-ocean hover:text-coral transition-colors inline-flex items-center gap-2", target: "_blank", rel: "noopener" do %>
              Visit Substack
              <span><%= "\u2197" %></span>
            <% end %>
          </div>
        <% end %>
      </div>
      <%# Image accent - 1/3 width %>
      <div class="hidden md:block">
        <%= image_tag "water.jpg", class: "w-full h-64 object-cover rounded-lg", alt: "Mountain lake" %>
      </div>
    </div>
  </div>
</section>

<%# Interests Section: Image Left (1/3), Content Right (2/3) %>
<section class="py-12 md:py-16 bg-cream border-t border-ink/5">
  <div class="max-w-5xl mx-auto px-6 md:px-10">
    <div class="grid md:grid-cols-3 gap-8 items-start">
      <%# Image accent - 1/3 width %>
      <div class="hidden md:block">
        <%= image_tag "city.jpg", class: "w-full h-64 object-cover rounded-lg", alt: "City skyline in fog" %>
      </div>
      <%# Content - 2/3 width %>
      <div class="md:col-span-2">
        <h2 class="text-2xl font-light text-ink mb-6 tracking-wide">Interests</h2>
        <div data-controller="expandable-list" data-expandable-list-limit-value="10">
          <ul class="space-y-2">
            <% @interests.each_with_index do |interest, index| %>
              <li data-expandable-list-target="item"
                  class="<%= index >= 10 ? 'hidden' : '' %>">
                <% if interest["url"] %>
                  <%= link_to interest["url"], class: "text-ink/80 hover:text-coral transition-colors inline-flex items-center gap-1", target: "_blank", rel: "noopener" do %>
                    <%= interest["name"] %>
                    <span class="text-xs text-ink/30"><%= "\u2197" %></span>
                  <% end %>
                <% else %>
                  <span class="text-ink/60"><%= interest["name"] %></span>
                <% end %>
              </li>
            <% end %>
          </ul>
          <% if @interests.size > 10 %>
            <button data-action="click->expandable-list#toggle"
                    data-expandable-list-target="button"
                    class="mt-4 text-sm text-ocean hover:text-coral transition-colors cursor-pointer">
              <span data-expandable-list-target="buttonText">Show more (<%= @interests.size - 10 %>)</span>
            </button>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</section>

<%# Connect Section: Full Width Footer %>
<footer class="bg-ink text-cream py-10 px-6 md:px-10">
  <div class="max-w-5xl mx-auto text-center">
    <h2 class="text-xl font-light mb-6 tracking-wide">Connect</h2>
    <div class="flex flex-wrap justify-center gap-6 md:gap-10">
      <%= link_to "https://gentschev.substack.com/", class: "text-cream/70 hover:text-coral transition-colors", target: "_blank", rel: "noopener" do %>
        Substack
      <% end %>
      <%= link_to "https://x.com/gentschev", class: "text-cream/70 hover:text-coral transition-colors", target: "_blank", rel: "noopener" do %>
        X / Twitter
      <% end %>
      <%= link_to "https://github.com/gentschev", class: "text-cream/70 hover:text-coral transition-colors", target: "_blank", rel: "noopener" do %>
        GitHub
      <% end %>
      <%= link_to "https://www.linkedin.com/in/gentschev/", class: "text-cream/70 hover:text-coral transition-colors", target: "_blank", rel: "noopener" do %>
        LinkedIn
      <% end %>
    </div>
    <p class="mt-8 text-cream/40 text-sm">&copy; <%= Time.current.year %> Gentschev</p>
    <p class="mt-4 text-cream/30 text-xs">
      Photos by
      <%= link_to "Lucie Hošová", "https://unsplash.com/@lucie_hosova", class: "hover:text-cream/50 transition-colors", target: "_blank", rel: "noopener" %>,
      <%= link_to "Peter Oboňa", "https://unsplash.com/@pietrobona", class: "hover:text-cream/50 transition-colors", target: "_blank", rel: "noopener" %>,
      and <%= link_to "Paulius Dragunas", "https://unsplash.com/@pauliusdragunas", class: "hover:text-cream/50 transition-colors", target: "_blank", rel: "noopener" %>
      on Unsplash
    </p>
  </div>
</footer>
